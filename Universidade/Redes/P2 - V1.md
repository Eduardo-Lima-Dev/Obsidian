---
tags:
  - Universidade
materia: Redes
tipo: RevisÃ£o
---
### 1. Sobre o programa `traceroute`, responda: que **protocolos** da camada de rede ele usa? Como ele funciona? (2 pontos)

Ele usa os **protocolos IP e ICMP**. Ele funciona de modo que ele **envia pacotes com TTL crescente** (inicialmente baixo e aumentando a cada envio) para descobrir os **roteadores presentes no caminho**. 
Cada roteador recebe o pacote e **descarta** quando o **TTL atinge zero**, enviando uma **mensagem ICMP de erro** ao remetente. Esse processo se repete atÃ© que o pacote chegue ao destino final. 
Quando o pacote **atinge o destino**, o prÃ³prio **host de destino** o descarta e responde com uma **mensagem ICMP de sucesso**, permitindo calcular o **tempo de ida e volta (RTT)**.

### 2. Explique o que Ã© e como funcionam o **NAT** e sua tabela, detalhando todos os campos da tabela. (2 pontos)

O **NAT** Ã© uma soluÃ§Ã£o criada para lidar com o **esgotamento de endereÃ§os IPv4**. Ele **traduz IPs privados para IPs pÃºblicos**, permitindo que dispositivos de redes internas acessem a Internet.
Seu funcionamento ocorre da seguinte forma:
1. Quando um dispositivo na rede privada faz uma **requisiÃ§Ã£o para a rede pÃºblica**, o **NAT substitui o IP de origem pelo seu prÃ³prio IP** e associa a requisiÃ§Ã£o a uma **porta especÃ­fica**.
2. O pacote modificado Ã© enviado ao **destino na rede pÃºblica**.
3. Quando a resposta retorna, o NAT consulta sua **tabela de NAT** para identificar **qual dispositivo privado fez a requisiÃ§Ã£o** e **redireciona o pacote para o IP e porta corretos na rede privada**.
4. Esse processo permite que mÃºltiplos dispositivos compartilhem um **Ãºnico IP pÃºblico**, melhorando a **seguranÃ§a**, pois impede conexÃµes diretas externas a menos que tenham sido iniciadas pela rede interna.
#### **Campos da tabela NAT**
A **tabela NAT** armazena as seguintes informaÃ§Ãµes para gerenciar as conexÃµes:
- **IP de origem** (da rede privada),
- **IP do NAT** (IP pÃºblico utilizado para a conexÃ£o),
- **IP de destino** (servidor externo que recebe a requisiÃ§Ã£o),
- **Porta de origem** (da mÃ¡quina na rede privada),
- **Porta do NAT** (porta associada pelo NAT),
- **Porta de destino** (porta do servidor externo),
- **Protocolo utilizado** (TCP/UDP),
- **Timestamp** (registro do momento da conexÃ£o).
Esse mecanismo permite que diversas mÃ¡quinas da rede privada **compartilhem um mesmo IP pÃºblico**, mantendo o controle sobre as conexÃµes ativas.

### 3. Como se trata a **fragmentaÃ§Ã£o de pacotes** no **IPv4** e no **IPv6**? Explique cada um, detalhando as diferenÃ§as. (2 Pontos)

#### **IPv6**
O **IPv6** **nÃ£o possui fragmentaÃ§Ã£o**. Quando um pacote chega a um **enlace que nÃ£o suporta seu tamanho**, o roteador **descarta o pacote e envia um aviso** para a origem. Dessa forma, a origem ajusta os pacotes para serem **enviados em tamanhos menores**, evitando fragmentaÃ§Ã£o ao longo do caminho.

---
#### **IPv4**
O **IPv4** permite **fragmentaÃ§Ã£o**. Se um pacote for maior que o **MTU (Maximum Transmission Unit)** do enlace, ele Ã© **dividido em pedaÃ§os menores**. Cada fragmento contÃ©m **informaÃ§Ãµes sobre sua posiÃ§Ã£o no pacote original** e Ã© **encaminhado separadamente**. A **reconstruÃ§Ã£o dos fragmentos** ocorre **somente no destino final**.

---
ðŸ’¡ **DiferenÃ§a principal**:
- No **IPv4**, os **roteadores podem fragmentar os pacotes**.
- No **IPv6**, **a fragmentaÃ§Ã£o nÃ£o ocorre nos roteadores**, sendo **responsabilidade do host de origem** ajustar o tamanho dos pacotes antes do envio.

### 4. Sobre protocolos de roteamento, responda:

#### a) Qual a diferenÃ§a entre um protocolo **intra-AS** e um **inter-AS**? (0,5 Ponto)

- **Intra-AS**: Ocorre **internamente** em um **sistema autÃ´nomo**, onde os roteadores **trocam rotas entre si**. Exemplos: **RIP** e **OSPF**.
- **Inter-AS**: Ocorre nos **roteadores de borda** para permitir a **comunicaÃ§Ã£o entre sistemas autÃ´nomos**. O principal exemplo Ã© o **BGP**, pois precisa manter um **padrÃ£o global** de comunicaÃ§Ã£o.

---

#### b) Qual a diferenÃ§a entre **protocolos de estado de enlace** e **protocolos de vetor de distÃ¢ncia**? DÃª exemplos de cada um. (0,5 Ponto)

- **Estado de enlace**: Todos os roteadores possuem a **topologia completa** da rede e trocam **estados de enlaces** entre si. Usam o **algoritmo de Dijkstra** para encontrar o menor caminho. Exemplo: **OSPF**.
  - **Algoritmo de Dijkstra**: Inicializa os custos dos enlaces, percorre os nÃ³s, armazena informaÃ§Ãµes de caminhos e calcula **dinamicamente** o menor custo.
- **Vetor de distÃ¢ncia**: Os roteadores conhecem apenas seus **vizinhos diretos** e o **custo atÃ© eles**. Cada roteador mantÃ©m uma **tabela com distÃ¢ncias** e troca essas informaÃ§Ãµes periodicamente. Exemplo: **RIP**.
  - O roteador recebe **tabelas de distÃ¢ncia** dos vizinhos e **atualiza** suas prÃ³prias rotas sempre que hÃ¡ mudanÃ§as.

---

### c) Como Ã© possÃ­vel que dois pacotes enviados por uma mesma mÃ¡quina e para o mesmo destino cheguem em ordem diferente da enviada? Explique. (1 ponto)

Isso pode acontecer quando os **pacotes tomam rotas distintas** na rede ou quando ocorre **fragmentaÃ§Ã£o** dos pacotes.

### 5. Explique detalhadamente o funcionamento do protocolo **RIP**, incluindo regras e o **algoritmo de roteamento**. (2 pontos)

O **RIP** (*Routing Information Protocol*) Ã© um protocolo **descentralizado**, no qual cada roteador **conhece apenas seus vizinhos** e o **custo para chegar atÃ© eles**.
- O **algoritmo utilizado** Ã© o **Bellman-Ford**, que funciona da seguinte maneira:
  1. Cada roteador mantÃ©m uma **tabela de custos** contendo as rotas para seus vizinhos.
  2. Quando um roteador recebe uma tabela de um vizinho, ele **compara, adiciona e atualiza** suas prÃ³prias rotas conforme necessÃ¡rio.
  3. Essa atualizaÃ§Ã£o ocorre **periodicamente** ou sempre que hÃ¡ **mudanÃ§as na rede**.
Se um **enlace falha**, o roteador detecta a **indisponibilidade da rota** e propaga a atualizaÃ§Ã£o para os demais roteadores, que recalculam seus caminhos.
ðŸ“Œ O **RIP** Ã© **ideal para redes menores**, pois tem **baixo custo de processamento**, mas Ã© limitado a **mÃ¡ximo de 15 saltos**, tornando-o ineficiente para redes grandes.


> [!Camada AplicaÃ§Ã£o] PrÃ³ximo Assunto 
> [[P2 - V2]]